input(name='attr_version' type='hidden' value='1')


//- INCLUDES
  =============================
include src/pug/mixins.pug

//- VARIABLES
 =============================
- const personalityTraits = {'chaste':'lustful', 'energetic':'lazy', 'forgiving':'vengeful','generous':'selfish','honest':'deceitful','just':'arbitrary','merciful':'cruel','modest':'proud','prudent':'reckless','spiritual':'wordly','temperate':'indulgent','trusting':'suspicious','valorous':'cowardly'};
- const attributes = ['size', 'dex', 'str', 'con', 'app'];
- const skills = ['awareness', 'boating', 'chirurgery', 'compose', 'courtesy', 'dancing', 'faerie lore', 'falconry', 'fashion', 'first aid', 'flirting', 'folk lore', 'gaming', 'heraldry', 'hunting', 'industry', 'intrigue', 'orate', 'play', 'read', 'recognize', 'religion', 'romance', 'singing', 'stewardship', 'swimming', 'tourney'];
- const gmCharacters = ['name', 'glory', 'app',  'courtesy', 'flirting', 'intrigue', 'chaste', 'modest', 'temperate'];

//- TABS
  =============================
input(name='attr_sheet_type' type='hidden' value='character')
input(name='attr_character_type' type='hidden' value='knight')
input(name='attr_gamemaster_type' type='hidden' value='feast')

//-NPC SHEET
  =============================
.npc
  .box.npc-flex
    p NPC STUFF
  .box.npc-flex
    p MORE NPC STUFF 

//-PC SHEET
  =============================
.grid.tabs
  .col.sheet-type
    each val in ['character', 'holdings', 'entourage', 'gamemaster']
      label(data-i18n-title=`sheet type: ${val}`)
        if val === 'character'
          input(name=`attr_sheet_type` title=`@{sheet_type}` type='radio' value=val selected)
          span.text-center(data-i18n=`${val}`)
        else
          input(name=`attr_sheet_type` title=`@{sheet_type}` type='radio' value=val)
          span.text-center(data-i18n=`${val}`)
  .col
    select(name='attr_character_type' value='knight')
      option(data-i18n='knight' value='knight' selected)
      option(data-i18n='woman' value='woman')
    select(name='attr_gamemaster_type' value='feast')
      option(data-i18n='feast record' value='feast' selected)
      option(data-i18n='gamemaster characters' value='characters')

include src/pug/character.pug

include src/pug/entourage.pug

include src/pug/holdings.pug

.gamemaster.grid
  .feast.grid
    .row.2column
      .col
        img(alt='King Arthur Pendragon' src='https://raw.githubusercontent.com/clevett/roll20-character-sheets/pendragonv1/Pendragon5thEdition/src/pendragonlogo.jpg')
      .col.header
        h1.header(data-i18n='feast record')
    .row.3column
      each val in ['location', 'size', 'date']
        .col.grid.2autocolumn
          h2(data-i18n=val)
          +textInput(val)
    .row.sub-header.bottom-border
      each val in ['seating', 'glory', 'geniality mod.', 'accumulated geniality']
        h2(data-i18n=val)
    each value, key in {'above the salt (high table)':2, 'near the salt (seat of honor)': 1,'below the salt (normal seating)': 0,'on the floor (squires)': -1}
      - const repeatingName = key.split(' (')[0].replace(/ /g, '-');
      .row.sub-header
        .col.table
          h3(data-i18n=key)
        .col.grid.6column
          - let n = 1
          while n < 6
            h3.text-center(data-i18n=`round ${n++}`)
          h3.text-center.font-weight-bold(data-i18n='total')
      .repeating-container
        fieldset(class=`repeating_${repeatingName}`)
          .row
            .col
              +textInput('name')
            .col
              +numberInput('glory')
            .col
              label(data-i18n-title=`enter geniality modifier` title=`enter geniality modifier`)
                input.text-center(data-i18n-placeholder=name name=`attr_geniality_modifier` placeholder=name title=`@{geniality_modifier}` type='text' value=value)
            .col.6column
              - let roundCounter = 0
              while roundCounter < 5
                +numberInput(`round ${roundCounter++}`)
              +numberInput('round total')
    .row
      h2(data-i18n='notes')
      textarea(name='attr_feast_record_notes')
    
  .characters
    .row.2column
      .col
        img(alt='King Arthur Pendragon' src='https://raw.githubusercontent.com/clevett/roll20-character-sheets/pendragonv1/Pendragon5thEdition/src/pendragonlogo.jpg')
      .col.header
        h1.header(data-i18n='gamemaster characters')
    .row.3column
      each val in ['location', 'size', 'date']
        .col.grid.2autocolumn
          h2(data-i18n=val)
          +textInput(val)
    .row.bottom-border
      h2(data-i18n='significant gamemaster characters')
    .row.sub-header
      each val in gmCharacters
        if val === 'name'
          h2(data-i18n=val)
        else
          h2.text-center(data-i18n=val)
    .repeating-container
      fieldset(class=`repeating_gamemaster-characters`)
        .row.repeating-row
          each val in gmCharacters
            if val === 'name'
              +textInput(val)
            else if val === 'glory'
              +numberInput(val)
            else
              .col
                +numberInput(val)
                +rollButton(val)
    .row
      h2(data-i18n='notes')
      textarea(name='attr_feast_record_notes')

//-FOOTER
  =============================
.footer
  span Â©2016 Nocturnal Media. Permission granted to copy for personal use only.
  span v. 
  span(name='attr_version')


//-ROLL TEMPLATE
  =============================
.rolltemplates
  rolltemplate.sheet-rolltemplate-rolls
    .sheet-template-container
      // - Display a header on the template -
      .sheet-template-header
        | {{#header}}{{header}}{{/header}}
      // - Display the dice roll in the template -
      .sheet-template-body
          | {{#dice}}
          .sheet-template-row.sheet-template-roll
            .sheet-template-col 
              span {{dice}} 
              span Rolled
            | {{/dice}}
            | {{#threshold}}
            .sheet-template-col 
              span {{threshold}} 
              span Threshold
            | {{/threshold}}
            | {{#damage}}
            .sheet-template-row.sheet-template-damage
              .sheet-template-col
                |{{damage}} 
                span Rolled
              | {{/damage}}
            //- Display a description. This is great for text included with a roll -
          | {{#desc}}
          .sheet-template-row
            span.sheet-template-desc {{desc}}
          | {{/desc}}

//- SCRIPTS
script(type="text/worker")
  include src/js/scripts.js