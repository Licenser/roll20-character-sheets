input(name='attr_version' type='hidden' value='1')


//- INCLUDES
  =============================
include src/pug/mixins.pug

//- VARIABLES
 =============================
- const personalityTraits = {'chaste':'lustful', 'energetic':'lazy', 'forgiving':'vengeful','generous':'selfish','honest':'deceitful','just':'arbitrary','merciful':'cruel','modest':'proud','prudent':'reckless','spiritual':'wordly','temperate':'indulgent','trusting':'suspicious','valorous':'cowardly'};
- const attributes = ['size', 'dex', 'str', 'con', 'app'];
- const skills = ['awareness', 'boating', 'chirurgery', 'compose', 'courtesy', 'dancing', 'faerie lore', 'falconry', 'fashion', 'first aid', 'flirting', 'folk lore', 'gaming', 'heraldry', 'hunting', 'industry', 'intrigue', 'orate', 'play', 'read', 'recognize', 'religion', 'romance', 'singing', 'stewardship', 'swimming', 'tourney'];
- const gmCharacters = ['name', 'glory', 'app',  'courtesy', 'flirting', 'intrigue', 'chaste', 'modest', 'temperate'];

//- TABS
  =============================
input(name='attr_sheet_type' type='hidden' value='character')
input(name='attr_character_type' type='hidden' value='knight')
input(name='attr_gamemaster_type' type='hidden' value='feast')

//-NPC SHEET
  =============================
.npc
  .box.npc-flex
    p NPC STUFF
  .box.npc-flex
    p MORE NPC STUFF 

//-PC SHEET
  =============================
.grid.tabs
  .col.sheet-type
    each val in ['character', 'holdings', 'entourage', 'gamemaster']
      label(data-i18n-title=`sheet type: ${val}`)
        if val === 'character'
          input(name=`attr_sheet_type` title=`@{sheet_type}` type='radio' value=val selected)
          span.text-center(data-i18n=`${val}`)
        else
          input(name=`attr_sheet_type` title=`@{sheet_type}` type='radio' value=val)
          span.text-center(data-i18n=`${val}`)
  .col
    select(name='attr_character_type' value='knight')
      option(data-i18n='knight' value='knight' selected)
      option(data-i18n='woman' value='woman')
    select(name='attr_gamemaster_type' value='feast')
      option(data-i18n='feast record' value='feast' selected)
      option(data-i18n='gamemaster characters' value='characters')

.character.grid
  .col
    .row
      img.knight(alt="King Arthut Pendragon Knight's Character Sheet" src="https://raw.githubusercontent.com/clevett/roll20-character-sheets/pendragonv1/Pendragon5thEdition/src/pendragonlogo.png")
      img.woman(alt="King Arthut Pendragon Woman's Character Sheet" src="https://raw.githubusercontent.com/clevett/roll20-character-sheets/pendragonv1/Pendragon5thEdition/src/womenlogo.png")
    .row.2autocolumn
      h2(data-i18n='Player:')
      +textInput('player name')
    .personal-data
      .header
        h1(data-i18n='personal data')
      .row.2autocolumn
        h2(data-i18n='name')
        +textInput('name')
      .row.2column
        .col.2autocolumn
          h2(data-i18n='age')
          +numberInput('age')
        .col.2autocolumn.knight
          h2(data-i18n='son number')
          +textInput('son number')
        .col.2autocolumn.woman
          h2(data-i18n='daughter number')
          +textInput('daughter number')
      .row.2autocolumn
        h2(data-i18n='homeland')
        +textInput('homeland')
      .row.2column
        .col.2autocolumn
          h2(data-i18n='culture')
          +textInput('culture')
        .col.2autocolumn
            h2(data-i18n='religion')
            +textInput('personal religion')
      each val in ['lord', 'current class', 'current home']
        .row.2autocolumn(class=`${val.replace(' ', '-')}`)
          h2(data-i18n=val)
          +textInput(val)
    .personality-traits
      .header
        h1(data-i18n='personality traits')
      .row.2autocolumn.knight
        h2(data-i18n='Chivalry Bonus[*](total=80+)')
        +textInput('chivalry bonus')
      .row.2autocolumn.woman
        h2(data-i18n='Gentle Woman Bonus[*](total=80+)')
        +textInput('gentle woman bonus')
      .row.2autocolumn
        h2(data-i18n='Religious Bonus(traits all 16+)')
        +textInput('religious bonus')
      each val, key in personalityTraits
        .row.traits
          .font-weight-bold
            - const chivalryBonusIndicator = ['energetic','generous','just','merciful','modest','valorous']
            if chivalryBonusIndicator.includes(key)
              span.knight *
            - const gentlewomanBonusIndicator = ['chaste','energetic','honest','modest','prudent','temperate']
            if gentlewomanBonusIndicator.includes(key)
              span.woman *
          +checkboxInput(`${key} check`)
          +rollButton(key)
          +numberInput(key)
          span /
          +numberInput(val)
          +rollButton(val)
          +checkboxInput(`${val} check`)
      .repeating-container
        fieldset(class='repeating_directed-trait')
          .row
              h2(data-i18n='directed trait')
              +textInput('name')
              +numberInput('trait')
              +checkboxInput(`check`)
              +repeatingRollButton('trait')
    .passions
      .header
        h1(data-i18n='passions')
      each val in ['loyalty lord', 'love family', 'hospitality', 'honor']
        .row
          +rollButton(val)
          +numberInput(val)
          +checkboxInput(`${val} check`)
      .repeating-container
        fieldset(class='repeating_passion')
          .row
            +textInput('name')
            +numberInput('passion')
            +checkboxInput(`check`)
            +repeatingRollButton('passion')
    .equipment-carried
      .header
        h1(data-i18n='equipment carried')
      .row.armor.knight
        h2(data-i18n='armor type')
        +textInput('armor type')
        h2(data-i18n='points')
        +numberInput('armor points')
      .row.clothing
        h2(data-i18n='clothing')
        +textInput('clothing')
        h2(data-i18n='libra value')
        +textInput('libra value')
      .row
        h2.text-primary(data-i18n='gear')
      each val in ['personal', 'travel', 'war']
        - const classNotation = val === 'war' ? "knight" : "";
        .row.gear(class=classNotation)
          +checkboxInput(`${val} gear check`)
          h2(data-i18n=`${val}`)
          +textInput(`${val} gear`)
          h2(data-i18n=`on horse #`)
          +numberInput(`${val} gear on horse`)
      .repeating-container
        fieldset(class='repeating_equipment-carried')
          .row
              +textInput('equipment')
  .col.gold-left-border
    .attributes
      .header
        h1(data-i18n='attributes')
      .row.size
        +attributeButton('size')
        +numberInput('size')
        span.font-weight-bold(data-i18n='(Knockdown)')
      .row.2autocolumn
        +attributeButton('dexterity')
        +numberInput('dexterity')
      .row.2autocolumn
        +attributeButton('strength')
        +numberInput('strength')
      .row.constitution
        +attributeButton('constitution')
        +numberInput('constitution')
        span.font-weight-bold(data-i18n='(Major Wound)')
      .row.2autocolumn
        +attributeButton('appearance')
        +numberInput('appearance')
      .row.damage
        +damageButton('damage')
        span.text-center.display(name=`attr_damage`)
        span.font-weight-bold(data-i18n='d6')
      each val in ['healing rate', 'movement rate', 'total hit points', 'unconcious']
        .row.2autocolumn
          h2(data-i18n=val)
          span.text-center.display(name=`attr_${val.replace(/ /g, '_')}`)
    .distinctive-features
      .header
        h1(data-i18n='distinctive features')
      .row
        textarea(data-i18n-placeholder='distinctive features' name='attr_distinctive_features' placeholder='distinctive features')
    .skills
      .header
        h1(data-i18n='skills')
      each val in skills
        - const classNotation = val === 'chirurgery' || val === 'industry' ? "woman" : val === 'boating' || val === 'hunting' ? "knight"  : "";
        .row.col-3(class=`${val} ${classNotation}`)
            +rollButton(val)
            if val === 'play' || val === 'read' || val === 'religion'
              +textInput(`${val} name`)
            +numberInput(val)
            +checkboxInput(`${val} check`)
      .repeating-container
        fieldset(class='repeating_skills')
          .row
              +textInput('name')
              +numberInput('skill')
              +checkboxInput(`check`)
              +repeatingRollButton('skill')
    .squire
      .header.knight
        h1(data-i18n='squire')
      .header.woman
        h1(data-i18n='servant')
      each val in ['name', 'age']
        .row.2autocolumn
          h2(data-i18n=`${val}`)
          if val === 'name'
            +textInput(`squire ${val}`)
          else
            +numberInput(`squire ${val}`)
      each val in ['first aid', 'battle', 'horsemanship']
        - const attrName = val.replace(/ /g, '_');
        .row.3autocolumn.knight
          +squireButton(val)
          label(data-i18n-title=`enter ${val}` title=`enter ${val}`)
            input(name=`attr_squire_${attrName}` placeholder='#' title=`@{squire_${attrName}}` type='number' value='')
          +checkboxInput(`squire ${val} check`)
      .repeating-container
        fieldset(class='repeating_squire')
          .row
              +textInput('name')
              +numberInput('skill')
              +checkboxInput(`check`)
              +repeatingRollButton('skill')

  .col.gold-left-border
    .glory
      .header
        h1(data-i18n='glory')
      .row
        .col.2autocolumn
          h2(data-i18n='this game')
          +numberInput('glory this game')
      .row
        .col.2autocolumn
          h2(data-i18n='total')
          +numberInput('glory total')
    .current-hit-points
        .header
          h1(data-i18n='current hit points')
        .row
          +numberInput('current hit points')
        .row
          h2(data-i18n='wounds')
          textarea(data-i18n-placeholder='wounds' name='attr_wounds' placeholder='wounds')
        .row.chirurgery-needed
          +checkboxInput('chirurgery needed')
          h2(data-i18n='chirurgery needed')
    .combat-skills
      .header
        h1(data-i18n='combat skills')
      each val in ['battle', 'horsemanship']
        .row.col-3
          +rollButton(val)
          +numberInput(val)
          +checkboxInput(`${val} check`)
      .row
        h2.text-primary(data-i18n='weapon skills')
      each val in ['sword', 'lance', 'spear', 'dagger']
        - const classNotation = val != 'dagger' ? "knight" : "";
        .row.col-3(class=`${classNotation}`)
          +rollButton(val)
          +numberInput(val)
          +checkboxInput(`${val} check`)
      .repeating-container
        fieldset(class='repeating_combat-skills')
          .row
              +textInput('name')
              +numberInput('skill')
              +checkboxInput(`check`)
              +repeatingRollButton('skill')
    .jouse-score.knight
      .header
        h1(data-i18n='jouse score')
      .row.2column
        each val in ['win', 'losses']
          .col.2autocolumn
            h2(data-i18n=val)
            +numberInput(val)
    .womans-gift.woman
      .header
        h1(data-i18n="woman's gift")
      .row
        textarea(data-i18n-placeholder="woman's gift" name='attr_womans_gift')
    .horse
      .header
        h1(data-i18n='horses')
      .row
        h2.text-primary.knight(data-i18n='best warhorse (#1)')
        h2.text-primary.woman(data-i18n='best horse (#1)')
      .row.2autocolumn
        h2(data-i18n='type')
        +textInput('horse type')
      .row.2column
        each val in ['damage', 'move']
          .col.2autocolumn
            if val === 'damage'
              +horseDamageButton(`horse ${val}`)
            else
              h2(data-i18n=val)
            +textInput(`horse ${val}`)
      .row.2column
        each val in ['armor', 'hp']
          .col.2autocolumn
            h2(data-i18n=val)
            +numberInput(`horse ${val}`)
      .row.3column
        each val in ['siz', 'con', 'dex']
          .col.2autocolumn
            h2.text-uppercase(data-i18n=`${val}`)
            +textInput(`horse ${val}`)
      .row.2autocolumn
        h2(data-i18n='breed')
        +textInput('horse breed')
      .row
        h2.text-primary(data-i18n='other horses')
      .row.other-horse
        h2(data-i18n='riding(#2)')
        +textInput('horse 2')
        h2(data-i18n='move')
        +textInput('horse 2 move')
      .row.other-horse
        h2.woman(data-i18n='squire(#3)')
        h2.knight(data-i18n='squire(#3)')
        +textInput('horse 3')
        h2(data-i18n='move')
        +textInput('horse 3 move')
      .row.other-horse
        h2(data-i18n='(#4)')
        +textInput('horse 4')
        h2(data-i18n='move')
        +textInput('horse 4 move')
      .repeating-container
        fieldset(class='repeating_horses')
          .row
              +textInput('horse')
              h2(data-i18n='move')
              +textInput('horse move')
    .knight-details
      each val in ['coat of arms', 'motto']
        - const attrName = val.replace(/ /g, '_');
        .header
          h1(data-i18n=val)
        .row
          textarea(data-i18n-placeholder=val name=`attr_${attrName}` placeholder=val)

.entourage.grid
  .row.bottom-border.text-center
    h1.knight(data-i18n=`knight's entourage`)
    h1.woman(data-i18n=`lady's entourage`)
  .row.2column
    .col
      .row
        h1(data-i18n='squire')
      .repeating-container
        fieldset(class='repeating_squire')
          .row.2autocolumn
            h2(data-i18n='squire')
            +textInput('name')
          .row.col-2
            .col
              .row.3column
                each val in ['born', 'age', 'mod']
                  .col.2autocolumn
                    h2(data-i18n=val)
                    +textInput(val)
              .row.2autocolumn
                h2(data-i18n='skill')
                +textInput('skill 1')
              .row.2autocolumn
                h2(data-i18n='skill')
                +textInput('skill 2')
              .row.2autocolumn
                h2(data-i18n='loyalty lord')
                +textInput('loyalty lord')
            .col
              .row.2autocolumn
                h2(data-i18n='squire skill')
                +textInput('squire skill')
              - let squireSkillCounter = 1;
              while squireSkillCounter < 4
                .row.2autocolumn
                  h2(data-i18n='value')
                  +textInput(`value ${squireSkillCounter++}`)
    .col.commoners
      .repeating-container
        fieldset(class='repeating_entourage')
          .row.col-2
            .col.2autocolumn
              h2(data-i18n='position')
              +textInput('position')
            .col.2autocolumn
              h2(data-i18n='cost £')
              +textInput('cost')
          - let entourageSkillCounter = 0
          while entourageSkillCounter < 3
            .row.col-2
              .col.2autocolumn
                h2(data-i18n='skill')
                +textInput(`skill ${entourageSkillCounter++}`)
              .col.2autocolumn
                h2(data-i18n='value')
                +textInput(`value ${entourageSkillCounter}`)



.holdings.grid
  .col
    .row
      img.knight(alt="King Arthut Pendragon Knight's Character Sheet" src="https://raw.githubusercontent.com/clevett/roll20-character-sheets/pendragonv1/Pendragon5thEdition/src/pendragonlogo.png")
      img.woman(alt="King Arthut Pendragon Woman's Character Sheet" src="https://raw.githubusercontent.com/clevett/roll20-character-sheets/pendragonv1/Pendragon5thEdition/src/womenlogo.png")
    .annual-glory
      .header
        h1(data-i18n='annual glory rewards')
      each val in ['traits', 'chivalry', 'holdings', 'passions', 'religion', 'total']
        - const classNotation = val === 'chivalry' ? "knight"  : "";
        .row.2autocolumn(class=classNotation)
          h2(data-i18n=val)
          +textInput(`annual glory rewards ${val}`)
    .holdings-row
      .header
        h1(data-i18n='holdings')
      .row
        textarea(name='attr_holdings')
    .equipment-at-home
      .header
        h1(data-i18n='equipment at home')
      .row.2autocolumn
        h2(data-i18n='denarii')
        +textInput(`denarii`)
      .row.2autocolumn
        h2(data-i18n='shilling')
        +textInput(`shilling`)
      .row.2autocolumn
        h2(data-i18n='libra')
        +textInput(`libra`)
      .row
        textarea(name='attr_equipment_at_home')
    .army.knight
      .header
        h1(data-i18n='army')
      each val in ['old knights', 'middle aged knights', 'young knights', 'total family knights', 'vassal knights', 'other lineage men', 'levy']
        .row.2autocolumn
          h2(data-i18n=val)
          if val != "total family knights"
            +numberInput(val)
          else
            span.text-center.display(name='attr_total_family_knights')
      .row
        textarea(name='attr_army_notes')
    .household-treasures.woman
      .header
        h1(data-i18n='household treasures')
      .row
        textarea(data-i18n-placeholder='household treasures' name='attr_household_treasures')

  .col.gold-left-border
    .family-history
      .row.gold-bottom-border
        h1(data-i18n='family history and events')
      .row.grid.col-4
        each val in ['born', 'squired', 'knighted']
          - const classNotation = val === 'squired' || val === 'knighted' ? "knight"  : "";
          .col.2autocolumn(class=classNotation)
            h2(data-i18n=val)
            +textInput(val)
      .row.grid.knight
          .col.2autocolumn
            h2(data-i18n='member of the round table')
            +textInput('member of the round table')
      .row.grid.col-4
        each val in ['landed', 'titled', 'wed', 'died']
          .col.2autocolumn
            h2(data-i18n=val)
            +textInput(val)
      .row.grid.col-3
        each val in ['father name', 'class', 'glory to sons']
          .col.2autocolumn
            h2(data-i18n=val)
            +textInput(val)
      .row
        each val in ['family characteristic', 'spouse', 'lover', 'children', 'will']
          .col.2autocolumn
              h2(data-i18n=val)
              +textInput(val)

    .character-history
      .row.gold-bottom-border
        h1(data-i18n='character history')
        h1(data-i18n='glory')
      .row.events
        h2(data-i18n='date')
        h2(data-i18n='important event')
        h2(data-i18n='new')
        h2(data-i18n='total')
      .repeating-container
        fieldset(class='repeating_events')
          .row.events
            +textInput('date')
            +textInput('event')
            +numberInput('new glory')
            +numberInput('total glory')

.gamemaster.grid
  .feast.grid
    .row.2column
      .col
        img(alt='King Arthur Pendragon' src='https://raw.githubusercontent.com/clevett/roll20-character-sheets/pendragonv1/Pendragon5thEdition/src/pendragonlogo.jpg')
      .col.header
        h1.header(data-i18n='feast record')
    .row.3column
      each val in ['location', 'size', 'date']
        .col.grid.2autocolumn
          h2(data-i18n=val)
          +textInput(val)
    .row.sub-header.bottom-border
      each val in ['seating', 'glory', 'geniality mod.', 'accumulated geniality']
        h2(data-i18n=val)
    each value, key in {'above the salt (high table)':2, 'near the salt (seat of honor)': 1,'below the salt (normal seating)': 0,'on the floor (squires)': -1}
      - const repeatingName = key.split(' (')[0].replace(/ /g, '-');
      .row.sub-header
        .col.table
          h3(data-i18n=key)
        .col.grid.6column
          - let n = 1
          while n < 6
            h3.text-center(data-i18n=`round ${n++}`)
          h3.text-center.font-weight-bold(data-i18n='total')
      .repeating-container
        fieldset(class=`repeating_${repeatingName}`)
          .row
            .col
              +textInput('name')
            .col
              +numberInput('glory')
            .col
              label(data-i18n-title=`enter geniality modifier` title=`enter geniality modifier`)
                input.text-center(data-i18n-placeholder=name name=`attr_geniality_modifier` placeholder=name title=`@{geniality_modifier}` type='text' value=value)
            .col.6column
              - let roundCounter = 0
              while roundCounter < 5
                +numberInput(`round ${roundCounter++}`)
              +numberInput('round total')
    .row
      h2(data-i18n='notes')
      textarea(name='attr_feast_record_notes')
    
  .characters
    .row.2column
      .col
        img(alt='King Arthur Pendragon' src='https://raw.githubusercontent.com/clevett/roll20-character-sheets/pendragonv1/Pendragon5thEdition/src/pendragonlogo.jpg')
      .col.header
        h1.header(data-i18n='gamemaster characters')
    .row.3column
      each val in ['location', 'size', 'date']
        .col.grid.2autocolumn
          h2(data-i18n=val)
          +textInput(val)
    .row.bottom-border
      h2(data-i18n='significant gamemaster characters')
    .row.sub-header
      each val in gmCharacters
        if val === 'name'
          h2(data-i18n=val)
        else
          h2.text-center(data-i18n=val)
    .repeating-container
      fieldset(class=`repeating_gamemaster-characters`)
        .row.repeating-row
          each val in gmCharacters
            if val === 'name'
              +textInput(val)
            else if val === 'glory'
              +numberInput(val)
            else
              .col
                +numberInput(val)
                +rollButton(val)
    .row
      h2(data-i18n='notes')
      textarea(name='attr_feast_record_notes')

//-FOOTER
  =============================
.footer
  span ©2016 Nocturnal Media. Permission granted to copy for personal use only.
  span v. 
  span(name='attr_version')


//-ROLL TEMPLATE
  =============================
.rolltemplates
  rolltemplate.sheet-rolltemplate-rolls
    .sheet-template-container
      // - Display a header on the template -
      .sheet-template-header
        | {{#header}}{{header}}{{/header}}
      // - Display the dice roll in the template -
      .sheet-template-body
          | {{#dice}}
          .sheet-template-row.sheet-template-roll
            .sheet-template-col 
              span {{dice}} 
              span Rolled
            | {{/dice}}
            | {{#threshold}}
            .sheet-template-col 
              span {{threshold}} 
              span Threshold
            | {{/threshold}}
            | {{#damage}}
            .sheet-template-row.sheet-template-damage
              .sheet-template-col
                |{{damage}} 
                span Rolled
              | {{/damage}}
            //- Display a description. This is great for text included with a roll -
          | {{#desc}}
          .sheet-template-row
            span.sheet-template-desc {{desc}}
          | {{/desc}}

//- SCRIPTS
script(type="text/worker")
  include src/js/scripts.js